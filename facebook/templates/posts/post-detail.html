{% extends 'base.html' %}
{% load static %}


{% block content %}
<style>
    .main-content .col-5{
        margin-top: 2vw;
        margin-left: 30vw;
        background-color: white;
      }
    .post-img{
        height: 400px;
        background-size: cover;
        object-fit: cover;
        margin-top: 0.3vw;
    }
    .post-sl{
        border: none;
        background-color: white;
        width: 2vw;
    }
    .activity-icons{
        display: flex;
        justify-content: space-around;
        width: 100%;
    }
    /**
 * Oscuro: #283035
 * Azul: #03658c
 * Detalle: #c7cacb
 * Fondo: #dee1e3
 ----------------------------------*/
 * {
	margin: 0;
	padding: 0;
	-webkit-box-sizing: border-box;
	-moz-box-sizing: border-box;
	box-sizing: border-box;
}

a {
	color: #03658c;
	text-decoration: none;
}

ul {
   list-style-type: none;
}

body {
   font-family: 'Roboto', Arial, Helvetica, Sans-serif, Verdana;
   background: #385591;
}

/** ====================
* Lista de Comentarios
=======================*/
.comments-container {
   margin: 60px auto 15px;
   width: 768px;
}

.comments-container h1 {
   font-size: 36px;
   color: #283035;
   font-weight: 400;
}

.comments-container h1 a {
   font-size: 18px;
   font-weight: 700;
}

.comments-list {
   margin-top: 30px;
   position: relative;
}

.comments-list li {
   margin-bottom: 15px;
   display: block;
   position: relative;
}

.comments-list li:after {
   content: '';
   display: block;
   clear: both;
   height: 0;
   width: 0;
}

.reply-list {
   padding-left: 88px;
   clear: both;
   margin-top: 15px;
}
/**
* Avatar
---------------------------*/
.comments-list .comment-avatar {
   width: 65px;
   height: 65px;
   position: relative;
   z-index: 99;
   float: left;
   border: 3px solid #FFF;
   -webkit-border-radius: 4px;
   -moz-border-radius: 4px;
   border-radius: 4px;
   -webkit-box-shadow: 0 1px 2px rgba(0,0,0,0.2);
   -moz-box-shadow: 0 1px 2px rgba(0,0,0,0.2);
   box-shadow: 0 1px 2px rgba(0,0,0,0.2);
   overflow: hidden;
}

.comments-list .comment-avatar img {
   width: 100%;
   height: 100%;
}

.reply-list .comment-avatar {
   width: 50px;
   height: 50px;
}

.comment-main-level:after {
   content: '';
   width: 0;
   height: 0;
   display: block;
   clear: both;
}
/**
* Caja del Comentario
---------------------------*/
.comments-list .comment-box {
   width: 680px;
   float: right;
   position: relative;
   -webkit-box-shadow: 0 1px 1px rgba(0,0,0,0.15);
   -moz-box-shadow: 0 1px 1px rgba(0,0,0,0.15);
   box-shadow: 0 1px 1px rgba(0,0,0,0.15);
}

.comments-list .comment-box:before, .comments-list .comment-box:after {
   content: '';
   height: 0;
   width: 0;
   position: absolute;
   display: block;
   border-width: 10px 12px 10px 0;
   border-style: solid;
   border-color: transparent #FCFCFC;
   top: 8px;
   left: -11px;
}

.comments-list .comment-box:before {
   border-width: 11px 13px 11px 0;
   border-color: transparent rgba(0,0,0,0.05);
   left: -12px;
}

.reply-list .comment-box {
   width: 610px;
}
.comment-box .comment-head {
   background: #FCFCFC;
   padding: 10px 12px;
   border-bottom: 1px solid #E5E5E5;
   overflow: hidden;
   -webkit-border-radius: 4px 4px 0 0;
   -moz-border-radius: 4px 4px 0 0;
   border-radius: 4px 4px 0 0;
}

.comment-box .comment-head i {
   float: right;
   margin-left: 14px;
   position: relative;
   top: 2px;
   color: #A6A6A6;
   cursor: pointer;
   -webkit-transition: color 0.3s ease;
   -o-transition: color 0.3s ease;
   transition: color 0.3s ease;
}

.comment-box .comment-head i:hover {
   color: #03658c;
}

.comment-box .comment-name {
   color: #283035;
   font-size: 14px;
   font-weight: 700;
   float: left;
   margin-right: 10px;
}

.comment-box .comment-name a {
   color: #283035;
}

.comment-box .comment-head span {
   float: left;
   color: #999;
   font-size: 13px;
   position: relative;
   top: 1px;
}

.comment-box .comment-content {
   background: #FFF;
   padding: 12px;
   font-size: 15px;
   color: #595959;
   -webkit-border-radius: 0 0 4px 4px;
   -moz-border-radius: 0 0 4px 4px;
   border-radius: 0 0 4px 4px;
}

.comment-box .comment-name.by-author, .comment-box .comment-name.by-author a {color: #03658c;}
.comment-box .comment-name.by-author:after {
   content: 'autor';
   background: #03658c;
   color: #FFF;
   font-size: 12px;
   padding: 3px 5px;
   font-weight: 700;
   margin-left: 10px;
   -webkit-border-radius: 3px;
   -moz-border-radius: 3px;
   border-radius: 3px;
}

/** =====================
* Responsive
========================*/
@media only screen and (max-width: 766px) {
   .comments-container {
	   width: 480px;
   }

   .comments-list .comment-box {
	   width: 390px;
   }

   .reply-list .comment-box {
	   width: 320px;
   }
}
    .comment-main-level .comment-avatar{
		margin-bottom: -4.8vw;
	}
	.comment-main-level .comment-box{
		margin-right: -3vw;
	}
    .form{
    position: fixed;
    display: flex;
    flex-direction: row;
    margin-top: 36vw;
    margin-left: 28.5vw;
}
.form p textarea{
    width: 40vw;
    height: 2.5vw;
    padding: 0.3vw;
    font-size: 1.2vw;
    outline: none;
}
.form p label{
    display: none;
}
.form button{
    border: none;
    width: 4vw;
    height: 2.5vw;
    padding: 0.3vw;
    font-weight: bold;
    color: white;
    background-color: rgb(127, 59, 236);
}

body{
    margin-bottom: 5vw;
}
</style>

{##-----POST---SECTION---------------------------####################################################}

    <div class="main-content row">
         <div class="post-container col-5">
          <div class="post-row">
            <div class="user-profile">
              <img src="{{ post.user_id.image.url }}">
              <div>
                <p>{{ post.user_id.username }}</p>
                <span> {{ post.created_time }} </span>
              </div>
            </div>
            <a href=""><i class="fas fa-ellipsis-v"></i></a>
          </div>

              <img src="{{ post.image.url }}" class="post-img">
            <p class="post-text">{{ post.text }}</p>

              <div class="post-row">
                <div class="activity-icons">
                
{#------------------------POST---LIKE---ICONS-------------######################################## #}
                    <form method="post" action="{% url 'post-like' %}">{% csrf_token %}
                        <input type="hidden" value="{{ post.id }}" name="post_id">

                        {% if user not in post.liked.all %}
                            <button class="post-sl" type="submit"><i style="color: blue" class="fa-regular fa-xl fa-thumbs-up"></i></button>{{ post.liked.all.count }}
                        {% else %}
                            <button class="post-sl" type="submit"><i style="color: blue" class="fa-solid fa-xl fa-thumbs-up"></i></button>{{ post.liked.all.count }}
                        {% endif %}
                    </form>
                
{#----------------------POST---SAVE---ICONS---------------########################################## #}
                
                    <form method="post" action="{% url 'post-save' %}">{% csrf_token %}
                        <input type="hidden" value="{{ post.id }}" name="post_id">

                        {% if user not in post.saved.all %}
                            <button class="post-sl" type="submit"><i style="color: black" class="fa-regular fa-bookmark fa-xl"></i></button>{{ post.saved.all.count }}
                        {% else %}
                            <button class="post-sl" type="submit"><i style="color: #f8f800" class="fa-solid fa-bookmark fa-xl"></i></button>{{ post.saved.all.count }}
                        {% endif %}
                    </form>

{#---------------------POST---COMMENTS---ICONS---------########################################## #}
                
                <button class="post-sl"><i style="color: #80807b" class="fa-solid fa-comment fa-xl"></i><p style="margin-top:-0.7vw; margin-left: 2.2vw ">{{ post.review_set.count }}</p></button>

                
                
{#---------------------POST---EDIT---DELETE---SECTION---------########################################## #}
               
                
                {% if request.user == post.user_id %}
                
                    <a style="margin-top: 1.6vw; margin-left: 12vw" href="{% url 'edit-post' post.id %}"><i style="color: yellowgreen" class="fa-solid fa-pen-to-square"></i></a>
                    <a style="margin-top: 1.6vw;" href="{% url 'delete-post' post.id %}"><i style="color: red" class="fa-solid fa-trash"></i></a>
                
                {% endif %}
                
                
                
              </div>
         </div>
    </div>

    
{#---------------------POST---SECTION---ENDED---------########################################## #}
    
    
    
    

    
{#---------------------POST---COMMENTS---LISTS---------########################################## #}
    
    {% if post.review_set.all.exists  %}
        <h1 style="font-size: 1.5vw; color: wheat; margin-top: 1vw;margin-bottom: -2vw; font-weight: bold; text-align: center">COMMENTS</h1>
        <div class="comments-container">
		<ul id="comments-list" class="comments-list">
            {% for i in post.review_set.all %}
			<li>
				<div class="comment-main-level">
					
					<div class="comment-avatar"><img style="object-fit: cover; background-size: cover" src="{{ i.user_id.image.url }}" alt=""></div>
					
					<div class="comment-box">
						<div class="comment-head">
							<h6 class="comment-name by-author"><a href="#">{{ i.user_id.username }}</a></h6>
							<span>{{ i.created_time|date:"D d | M Y | H:i" }}</span>
                            {% if i.user_id == request.user %}
                                <form method="post" action="{% url 'delete-review' post.id i.id %}">{% csrf_token %}
                                    <button style="border: none;background-color: #FCFCFC"><i style="color: red" class="fa-solid fa-trash"></i></button>
                                </form>
                            {% endif %}
						</div>
						<div class="comment-content">
							{{ i.text }}
						</div>
					</div>
				</div>
			</li>	
            {% endfor %}
			
		</ul>
	</div>
    {% endif %}
    
    
{#---------------------POST---COMMENTS---LISTS---ENDED------########################################## #}
    
    
    
    <form class="form" method="post" action="{% url 'post-review' post.id %}">{% csrf_token %}
    
        {{ review_form.media }}
        {{ review_form.as_p }}
    
        <button type="submit">add</button>
    
    </form>
    


{% endblock content %}




































